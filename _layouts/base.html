{%- assign time_estimated = content | number_of_words | divided_by: 300 | plus: 1 | append: " minutes" -%}
<!doctype html>
<html lang="en">
<head>
  <title>{{ page.title | escape }} &#8211; {{ site.title | escape }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/assets/article.css" />
{%- if content contains 'mermaid' -%}
  <link rel="stylesheet" href="/assets/rougify-style-github.css" />
{%- endif -%}
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <header id="site-header">
    <section class="container-fluid">
      <nav class="fs-e4 pt-2 pb-3 pt-md-4">
        <div class="mb-3">
          <!-- <a href="/" style="background-size:0"><img alt="logo" src="/assets/Logo.svg" style="width:42px;height:42px;transform:rotate(15deg);"></a> -->
          <a class="text-decoration-none" href="/">{{ site.title | escape }}</a>
          <span class="serif text-muted">&mdash;</span> 
          <span class="serif text-muted">{{ site.subtitle | escape }}</span> 
        </div>
        <div>
          <a class="text-decoration-none text-nowrap" href="/feed.xml"><i class="bi-rss"></i> RSS</a>
          <a target="_blank" class="text-decoration-none text-nowrap ms-3" href="https://eepurl.com/c07Ft1"><i class="bi-envelope"></i> Get emails</a>  
          <!--<span class="serif text-muted d-none d-md-inline ms-3">(monthlyish updates)</span>-->
        </div>
      </nav>
    </section>
  </header>
{{ content }}
  <footer class="mt-5 pt-5 pb-3">
    <div class="container-fluid">
      <p>&copy; 2004&ndash;2022 authors as noted.</p>
      <p>No cookies. No analytics. To let me know you are reading this, <a target="_blank" href="https://eepurl.com/c07Ft1">get emails</a> or interact on each article's official Twitter thread.</p>
      <p><a href="/mission">Mission</a></p>
      <p><a href="/ethics">Ethics statement</a></p>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" integrity="sha256-0WMZ9PF4b2hTF66Eglv/9H5Vwk6lnOG4AbmCJxo96WQ=" crossorigin="anonymous"></script>
  <script>
    // Add anchors on DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function(event) {
      anchors.add();
    });
  </script>
{%- if content contains 'mermaid' -%}
{%- comment -%}
This matches a Markdown code fence in the Mermaid language (i.e. "```mermaid").
TODO: fix that string literal above https://github.com/mermaid-js/mermaid/issues/772#issuecomment-1030639383
{%- endcomment -%}
  <script src="https://cdn.jsdelivr.net/npm/mermaid@8.13.8/dist/mermaid.min.js" integrity="sha256-QmSAc2kIaUjleIJ46X7qPW2zrpCbXlMz3YIGgWpQ1Jo=" crossorigin="anonymous"></script>
  <script>
    const config = {
      theme: 'forest',
      themeCSS: "* {font-family: Gill Sans,Gill Sans MT,Calibri,sans-serif}",
      flowchart:{
        useMaxWidth:false,
        htmlLabels:true
      },
      fontFamily: 'Gill Sans'
      ///TODO: use the article font here, how to do it? https://mermaid-js.github.io/mermaid/#/./usage
    };
    mermaid.initialize(config);
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
  </script>   
{%- endif -%}
</body>
</html>