{%- assign time_estimated = content | number_of_words | divided_by: 300 | plus: 1 | append: " minutes" -%}
<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
  <title>{{ page.title | escape }} &#8211; {{ site.title | escape }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" integrity="sha256-2IJPcGfN/qOK/sfp/68HISUmaCQgbWnvHxEtchU6UF4=" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/article.css" />
{%- if content contains 'highlight' -%}
  <link rel="stylesheet" href="/assets/rougify-style-github.css" />
{%- endif -%}
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="canonical" content="{{ page.url | absolute_url }}">
</head>
<body>
  <header id="site-header">
    <section class="container-fluid">
      <nav class="pt-2 pb-3 pt-md-4 gap-3 d-flex flex-column flex-lg-row align-items-lg-center">
        <div class="me-auto">
          <a class="text-decoration-none" href="/">{{ site.title | escape }}</a>
          <span class="serif text-muted">&mdash;</span> 
          <span class="serif text-muted">{{ site.subtitle | escape }}</span> 
        </div>
        <form action="https://phor.us9.list-manage.com/subscribe/post?u=8b49e10ddf197497c02ff4eae&amp;id=e3fcfddf94&amp;MERGE1=blog.phor.net" method="post">
          <div class="input-group">
            <input type="email" name="EMAIL" class="form-control" placeholder="Email address" required>
            <button type="submit" class="btn btn-primary ms-2 rounded-pill"><i class="bi bi-bell-fill"></i> Monthly<span class="d-none d-lg-inline"> email</span></button>
          </div>
        </form>
        <div class="vr d-none d-lg-block"></div>
        <a class="text-decoration-none text-nowrap" href="/feed.xml"><i class="bi-rss"></i> RSS</a>
      </nav>
    </section>
  </header>
{{ content }}
  <footer class="mt-5 pt-5 pb-3">
    <div class="container-fluid">
      <p>&copy; 2004&ndash;2022 authors as noted.</p>
      <p>No cookies. No analytics. To let me know you are reading this, <a target="_blank" href="https://eepurl.com/c07Ft1">get emails</a> or interact on each article's official Twitter thread.</p>
      <p><a href="/mission">Mission</a></p>
      <p><a href="/ethics">Ethics statement</a></p>
      <p><a href="https://phor.net">William Entriken's homepage</a></p>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" integrity="sha256-0WMZ9PF4b2hTF66Eglv/9H5Vwk6lnOG4AbmCJxo96WQ=" crossorigin="anonymous"></script>
  <script>
    // Don't hurt people's eyes
    const matchPrefersLight = window.matchMedia('(prefers-color-scheme:light)');
    if (matchPrefersLight.matches) {
      document.documentElement.setAttribute('data-bs-theme', 'light');
    }
    matchPrefersLight.addEventListener('change', event => {
      document.documentElement.setAttribute('data-bs-theme', event.matches ? "light" : "dark");
    });
    // Add anchors on DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function(event) {
      anchors.add();
    });
  </script>
{%- if content contains 'mermaid' -%}
{%- comment -%}
This matches a Markdown code fence in the Mermaid language (i.e. "```mermaid").
TODO: fix that string literal above https://github.com/mermaid-js/mermaid/issues/772#issuecomment-1030639383
{%- endcomment -%}
  <script src="https://cdn.jsdelivr.net/npm/mermaid@9.4.3/dist/mermaid.min.js" integrity="sha256-e0o3JYsdjqKajf9eOe22FhioYSz9WofRY4dLKo3F6do=" crossorigin="anonymous"></script>
  <script>
    // Mermaid setup
    const config = {
      theme: 'forest',
      themeCSS: "* {font-family: Gill Sans,Gill Sans MT,Calibri,sans-serif}",
      flowchart:{
        useMaxWidth:false,
        htmlLabels:true
      },
      fontFamily: 'Gill Sans'
      ///TODO: use the article font here, how to do it? https://mermaid-js.github.io/mermaid/#/./usage
    };
    mermaid.initialize(config);
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
  </script>   
{%- endif -%}
</body>
</html>